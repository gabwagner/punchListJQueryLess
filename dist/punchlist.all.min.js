!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){n(1),t.exports=n(3)},function(t,e,n){(function(i){var a,c,o;o=void 0!==i?i:this.window||this.global,a=function(t){"use strict";new DOMParser;var e,n,i=0,a={punchListContainerTemplate:({title:t})=>`<div class="punchlist-title">\n    <h1><i class="fa fa-check"></i>${t}</h1>\n    </div>\n    <div id="punchlist-items-container">\n    <div id="punchlist-items">          \n    </div>\n    <div id="punchlist-item-action-add" data-action="punchlist-item-action-add">\n    <i class="fa fa-plus"></i>\n    Add an Item\n    </div>        \n    </div>`,punchListDataTemplate:t=>`"${t.name}":"${t.value}"`,punchListCommentTagsTemplate:t=>`<b>${t.name}</b>: ${t.value}`,punchListCommentTemplate:t=>`<div class="punchlist-comment">\n    <div class="punchlist-comment-text">${t.comment}</div>\n    <div class="punchlist-comment-tag">${t.tags?t.tags.map(a.punchListCommentTagsTemplate).join(" - "):""}${t.deletable?'<i class="fa fa-times-circle punchlist-item-comment-action-remove" data-action="punchlist-item-comment-action-remove"></i>':""}</div>\n    </div>`,punchListItemTagsTemplate:t=>`<div class="punchlist-item-tag"><b>${t.name}</b>: ${t.value}</div>`,punchListItemTemplate:(t,e)=>`<div class="punchlist-item-container" id="item-${e}" data-item='{${t.data?t.data.map(a.punchListDataTemplate).join(","):""}}'>\n    <div class="punchlist-item">\n    <div class="punchlist-item-label">\n    <input type="checkbox" id="punch-item-${e}" ${t.checked?"checked":""} data-action="punchlist-item-action-checked"/>\n    <label for="punch-item-${e}" class="punchlist-item-label-text">\n    <i class="fa fa-check"></i> \n    <span class="punchlist-item-label-text-line">\n    <span class="punchlist-item-label-text-data">${t.task}</span>\n    </span>\n    </label>\n    </div>\n    <div class="punchlist-item-action" title="comments" data-action="punchlist-item-action-comment">\n    <i class="fa fa-comment punchlist-item-action-comment" data-action="punchlist-item-action-comment"></i>\n    </div>\n    <div class="punchlist-item-action" title="remove" data-action="punchlist-item-action-remove">\n    <i class="fa fa-times-circle punchlist-item-action-remove" data-action="punchlist-item-action-remove"></i>\n    </div>\n    </div>\n    <div class="punchlist-item-tags">\n    ${t.tags?t.tags.map(a.punchListItemTagsTemplate).join(""):""}\n    </div>\n    <div class="punchlist-comments hidden">\n    ${t.comments?t.comments.map(a.punchListCommentTemplate).join(""):""}\n    </div>\n    <div class="punchlist-item-comment-action-add" data-action="punchlist-item-comment-action-add">\n    <i class="fa fa-plus"></i>\n    Add Comment\n    </div>\n    </div>`},c=window.punchList={},o=!!document.querySelector&&!!t.addEventListener,r={title:"Punch List",width:null,fillDataCall:null,fillDataTransform:null,addItemHandler:null,removeItemHandler:null,checkedItemHandler:null,validateJSON:!0},l=function(t){var e=[];if(n.fillDataTransform){var i=n.fillDataTransform;for(var a of t){var c={};if(c.task=a[i.task],c.checked=a[i.checked],c.comments=[],c.tags=[],c.data=[],i.data)for(var o of i.data){var r={};r.name=o.name,r.value=a[o.field],c.data.push(r)}if(i.tags)for(var l of i.tags){var m=s(a,l);c.tags.push(m)}if(i.comments)for(var u of a[i.comments.listField]){var d={};if(d.comment=u[i.comments.field],d.deletable=i.comments.deletable,d.tags=[],i.comments.tags)for(var p of i.comments.tags){var m=s(u,p);d.tags.push(m)}c.comments.push(d)}e.push(c)}}else e=t;return e},s=function(t,e){var n={};switch(n.name=e.name,e.convert){case"date":n.value=new Date(t[e.field]).toLocaleString();break;default:n.value=t[e.field]}return n},m=function(t){var e=t.offsetHeight,n=t.animate([{height:e+"px"},{height:"0px"}],{duration:300});n.onfinish=function(e){t.remove()}},u=function(t){var e=t.closest(".punchlist-item-container"),i=t.value;i.length>0?n.addItemHandler&&!n.addItemHandler(e.getAttribute("id"),i)?(console.warn("[PunchList][addNewItemAction] Item could not be added - check handler addItemHandler"),e.remove()):t.parentNode.innerHTML=i:e.remove()},d=function(t){var e=t.closest(".punchlist-comment"),n=t.value;n.length>0?t.parentNode.innerHTML=n:e.remove()},p=function(t){var c=t.target.getAttribute("data-action");switch(c){case"punchlist-item-action-checked":!function(t){if(n.checkedItemHandler){var e=t.closest(".punchlist-item-container");n.checkedItemHandler(e.getAttribute("id"),JSON.parse(e.getAttribute("data-item")),t.checked)||(console.warn("[PunchList][setItemFunctionality] Item could not change state - check handler checkedItemHandler"),t.checked=!t.checked)}}(t.target);break;case"punchlist-item-action-comment":t.target.closest(".punchlist-item-container").querySelector(".punchlist-comments").classList.toggle("hidden");break;case"punchlist-item-action-remove":!function(t){var e=t.closest(".punchlist-item-container");n.removeItemHandler?n.removeItemHandler(e.getAttribute("id"),JSON.parse(e.getAttribute("data-item")))?m(e):console.warn("[PunchList][setItemFunctionality]Item could not be removed - check handler removeItemHandler"):m(e)}(t.target);break;case"punchlist-item-action-add":!function(){i++;var t=e.querySelector("#punchlist-items"),n={[i]:{task:"",comments:[],tags:[],data:[]}},c=Utils.map(n,a.punchListItemTemplate).join("");t.innerHTML=t.innerHTML+c;var o=t.querySelector("#item-"+i).querySelector(".punchlist-item-label-text-data"),r=document.createElement("input");r.type="text",r.id="punch-item",r.style.width="100%",r.addEventListener("blur",h,!1),o.append(r),r.focus()}();break;case"punchlist-item-comment-action-add":!function(t){var e=t.previousElementSibling,n={comment:"",deletable:!0,tags:[]},i=(new Date).toLocaleString();n.tags.push({name:"User",value:"Me"}),n.tags.push({name:"Date",value:i});var c=Utils.map([n],a.punchListCommentTemplate).join("");e.innerHTML=c+e.innerHTML;var o=e.querySelector(".punchlist-comment"),r=document.createElement("input");r.type="text",r.id="punch-item-comment",r.style.width="100%",o.querySelector(".punchlist-comment-text").append(r),r.addEventListener("blur",h,!1),r.focus()}(t.target);break;case"punchlist-item-comment-action-remove":!function(t){t.closest(".punchlist-comment").remove()}(t.target)}},h=function(t){var e=t.target.getAttribute("id");switch(e){case"punch-item":u(t.target);break;case"punch-item-comment":d(t.target)}},f=function(t){var e=t.which||t.keyCode;if(13===e){var n=t.target.getAttribute("id");switch(n){case"punch-item":t.target.removeEventListener("blur",h,!1),u(t.target);break;case"punch-item-comment":t.target.removeEventListener("blur",h,!1),d(t.target)}}};return c.destroy=function(){n&&(e.removeEventListener("click",p,!1),e.removeEventListener("keypress",f,!1),n=null)},c.init=function(t){if(!o)return;c.destroy(),n=Utils.extend(r,t);let s=document.querySelector(n.container);s?(function(t){t.classList.add("punchlist-container");var e=[{title:n.title}].map(a.punchListContainerTemplate).join("");n.width&&(t.style.width=n.width+"px"),t.innerHTML=e}(e=s),e.addEventListener("click",p,!1),e.addEventListener("keypress",f,!1),n.fillDataCall&&fetch(n.fillDataCall).then(function(t){return t.json()}).then(function(t){i=t.length;var e=l(t);c.drawItems(e)}).catch(t=>console.error('[PunchList][populatePunchList] Error while retrieving data. Status:"'+t+'"'))):(console.error('[PunchList][init] Main container not found. Selector: "'+n.container+'"'),c.destroy())},c.drawItems=function(t){i=t.length+1;var n=t.map(a.punchListItemTemplate).join("");e.querySelector("#punchlist-items").innerHTML=n},c}(o),void 0===(c="function"==typeof a?a.call(e,n,e,t):a)||(t.exports=c)}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){!function(){var t=window.DomReady={},e=navigator.userAgent.toLowerCase(),n={version:(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(e),opera:/opera/.test(e),msie:/msie/.test(e)&&!/opera/.test(e),mozilla:/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)},i=!1,a=!1,c=[];function o(){if(!a&&(a=!0,c)){for(var t=0;t<c.length;t++)c[t].call(window,[]);c=[]}}function r(){if(!i){var t,e,c;if(i=!0,document.addEventListener&&!n.opera&&document.addEventListener("DOMContentLoaded",o,!1),n.msie&&window==top&&function(){if(!a){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}o()}}(),n.opera&&document.addEventListener("DOMContentLoaded",function(){if(!a){for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].disabled)return void setTimeout(arguments.callee,0);o()}},!1),n.safari)!function(){if(!a)if("loaded"==document.readyState||"complete"==document.readyState){if(void 0===t){for(var e=document.getElementsByTagName("link"),n=0;n<e.length;n++)"stylesheet"==e[n].getAttribute("rel")&&t++;var i=document.getElementsByTagName("style");t+=i.length}document.styleSheets.length==t?o():setTimeout(arguments.callee,0)}else setTimeout(arguments.callee,0)}();e=o,c=window.onload,"function"!=typeof window.onload?window.onload=e:window.onload=function(){c&&c(),e()}}}t.ready=function(t,e){r(),a?t.call(window,[]):c.push(function(){return t.call(window,[])})},r()}();window.Utils={map:function(t,e){var n;if(Array.isArray(t))n=t.map(e);else if("object"==typeof t&&t)for(var i in n=[],t)n.push(e(t[i],i,t));return n},extend:function(){var t={},e=!1,n=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],n++);for(var a=function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e&&"[object Object]"===Object.prototype.toString.call(n[i])?t[i]=extend(!0,t[i],n[i]):t[i]=n[i])};n<i;n++)a(arguments[n]);return t}}}]);